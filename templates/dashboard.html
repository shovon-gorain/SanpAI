{% extends "base.html" %}

{% block title %}Dashboard - ReelCraft AI{% endblock %}

{% block content %}
<div class="dashboard-container">
    <!-- Header with user info -->
    <header class="dashboard-header">
        <div class="container">
            <nav>
                <div class="logo">
                    <i class="fas fa-film"></i>
                    <span>ReelCraft AI</span>
                </div>
                <div class="nav-links">
                    <a href="#" data-section="create" class="active">Create</a>
                    <a href="#" data-section="my-videos">My Videos</a>
                    <a href="#" data-section="history">History</a>
                </div>
                <div class="user-info">
                    <span>Welcome, {{ user.name }}!</span>
                    <div class="user-actions">
                        <a href="{{ url_for('logout') }}" class="btn btn-logout">Logout</a>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <!-- Main content -->
    <main class="dashboard-main">
        <div class="container">
            <!-- Create Section -->
            <section id="create-section" class="dashboard-section active">
                <h1 class="dashboard-title">Create Your Video Reel</h1>
                <p class="dashboard-subtitle">Upload your photos and choose a music style to generate a stunning video</p>

                <!-- Video creation interface -->
                <div class="creation-interface">
                    <div class="upload-section">
                        <div class="upload-area" id="upload-area">
                            <i class="fas fa-cloud-upload-alt"></i>
                            <h3>Click to Upload Photos</h3>
                            <p>Select 5-10 photos for best results</p>
                            <input type="file" id="file-input" multiple accept="image/*" style="display: none;">
                        </div>
                        <div class="uploaded-files" id="uploaded-files"></div>
                        <div class="upload-error" id="upload-error" style="color: red; display: none;"></div>
                    </div>

                    <div class="music-upload-section">
                        <h3>Upload Your Own Music (Optional)</h3>
                        <div class="music-upload-area" id="music-upload-area">
                            <i class="fas fa-music"></i>
                            <h3>Click to Upload Music</h3>
                            <p>Select a music file (MP3, WAV)</p>
                            <input type="file" id="music-file-input" accept="audio/*" style="display: none;">
                        </div>
                        <div class="uploaded-music" id="uploaded-music"></div>
                        <p>Or select a pre-defined style below</p>
                    </div>

                    <div class="music-selection-section">
                        <h3>Select Music Style</h3>
                        <div class="music-selection">
                            <div class="music-option" data-style="pop">Pop</div>
                            <div class="music-option" data-style="rock">Rock</div>
                            <div class="music-option active" data-style="electronic">Electronic</div>
                            <div class="music-option" data-style="hiphop">Hip Hop</div>
                            <div class="music-option" data-style="chill">Chill</div>
                        </div>
                    </div>

                    <button class="generate-btn" id="generate-btn">Generate Video</button>
                </div>

                <!-- Recent videos section -->
                <div class="recent-videos">
                    <h2>Your Recent Videos</h2>
                    <div class="videos-grid" id="recent-videos-grid">
                        {% if videos %}
                            {% for video in videos[:4] %}
                            <div class="video-card">
                                <div class="video-thumbnail">
                                    <div class="thumbnail-placeholder">
                                        <i class="fas fa-play-circle"></i>
                                    </div>
                                    <button class="play-btn" data-video-url="{{ url_for('download_file', filename=video.video_url) }}" data-video-title="{{ video.title or 'Untitled Video' }}" data-video-date="{{ video.created_at }}" data-video-music="{{ video.music_style }}">
                                        <i class="fas fa-play"></i>
                                    </button>
                                </div>
                                <div class="video-info">
                                    <h3 class="video-title">{{ video.title or "Untitled Video" }}</h3>
                                    <p class="video-date">Created: {{ video.created_at[:10] }}</p>
                                    <p class="video-music">Music: {{ video.music_style }}</p>
                                </div>
                            </div>
                            {% endfor %}
                        {% else %}
                            <div class="video-placeholder">
                                <i class="fas fa-film"></i>
                                <p>You haven't created any videos yet</p>
                            </div>
                        {% endif %}
                    </div>
                </div>
            </section>

            <!-- My Videos Section -->
            <section id="my-videos-section" class="dashboard-section">
                <h1 class="dashboard-title">My Videos</h1>
                <p class="dashboard-subtitle">All videos you've created</p>
                
                <div class="filter-controls">
                    <input type="text" id="video-search" placeholder="Search videos..." class="search-input">
                    <select id="video-sort" class="sort-select">
                        <option value="newest">Newest First</option>
                        <option value="oldest">Oldest First</option>
                        <option value="name">By Name</option>
                    </select>
                </div>
                
                <div class="all-videos-grid" id="all-videos-grid">
                    {% if videos %}
                        {% for video in videos %}
                        <div class="video-card">
                            <div class="video-thumbnail">
                                <div class="thumbnail-placeholder">
                                    <i class="fas fa-play-circle"></i>
                                </div>
                                <button class="play-btn" data-video-url="{{ url_for('download_file', filename=video.video_url) }}" data-video-title="{{ video.title or 'Untitled Video' }}" data-video-date="{{ video.created_at }}" data-video-music="{{ video.music_style }}">
                                    <i class="fas fa-play"></i>
                                </button>
                            </div>
                            <div class="video-info">
                                <h3 class="video-title">{{ video.title or "Untitled Video" }}</h3>
                                <p class="video-date">Created: {{ video.created_at[:10] }}</p>
                                <p class="video-music">Music: {{ video.music_style }}</p>
                            </div>
                        </div>
                        {% endfor %}
                    {% else %}
                        <div class="video-placeholder">
                            <i class="fas fa-film"></i>
                            <p>You haven't created any videos yet</p>
                        </div>
                    {% endif %}
                </div>
            </section>

            <!-- History Section -->
            <section id="history-section" class="dashboard-section">
                <h1 class="dashboard-title">Video History</h1>
                <p class="dashboard-subtitle">Detailed history of all your video creations</p>
                
                <div class="history-controls">
                    <input type="text" id="history-search" placeholder="Search history..." class="search-input">
                    <select id="history-filter" class="filter-select">
                        <option value="all">All Videos</option>
                        <option value="week">This Week</option>
                        <option value="month">This Month</option>
                    </select>
                </div>
                
                <div class="history-table-container">
                    <table class="history-table">
                        <thead>
                            <tr>
                                <th>Thumbnail</th>
                                <th>Video Name</th>
                                <th>Created</th>
                                <th>Music</th>
                                <th>Duration</th>
                                <th>Tags</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="history-table-body">
                            {% if videos %}
                                {% for video in videos %}
                                <tr>
                                    <td>
                                        <div class="history-thumbnail">
                                            <i class="fas fa-film"></i>
                                        </div>
                                    </td>
                                    <td>{{ video.title or "Untitled Video" }}</td>
                                    <td>{{ video.created_at }}</td>
                                    <td>{{ video.music_style }}</td>
                                    <td>45s</td>
                                    <td>
                                        <span class="tag">user</span>
                                        <span class="tag">generated</span>
                                    </td>
                                    <td>
                                        <button class="btn-play" data-video-url="{{ url_for('download_file', filename=video.video_url) }}" data-video-title="{{ video.title or 'Untitled Video' }}" data-video-date="{{ video.created_at }}" data-video-music="{{ video.music_style }}">
                                            <i class="fas fa-play"></i> Play
                                        </button>
                                    </td>
                                </tr>
                                {% endfor %}
                            {% else %}
                                <tr>
                                    <td colspan="7" class="no-data">No video history available</td>
                                </tr>
                            {% endif %}
                        </tbody>
                    </table>
                </div>
            </section>
        </div>
    </main>
</div>

<!-- Video Player Modal -->
<div class="modal" id="video-player-modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 id="video-modal-title">Video Title</h3>
            <span class="modal-close">&times;</span>
        </div>
        <div class="modal-body">
            <div class="video-player-container">
                <video id="modal-video-player" controls>
                    Your browser does not support the video tag.
                </video>
            </div>
            <div class="video-info">
                <p><strong>Created:</strong> <span id="video-created-date"></span></p>
                <p><strong>Music:</strong> <span id="video-music-style"></span></p>
                <p><strong>Duration:</strong> <span id="video-duration">45s</span></p>
                <p><strong>Tags:</strong> <span id="video-tags">user, generated</span></p>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary modal-close">Close</button>
            <button class="btn btn-primary" id="download-video-btn">Download</button>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const uploadArea = document.getElementById('upload-area');
    const fileInput = document.getElementById('file-input');
    const uploadedFiles = document.getElementById('uploaded-files');
    const uploadError = document.getElementById('upload-error');
    const generateBtn = document.getElementById('generate-btn');
    const musicOptions = document.querySelectorAll('.music-option');
    const navLinks = document.querySelectorAll('.nav-links a');
    const sections = document.querySelectorAll('.dashboard-section');
    
    // Music upload elements
    const musicUploadArea = document.getElementById('music-upload-area');
    const musicFileInput = document.getElementById('music-file-input');
    const uploadedMusic = document.getElementById('uploaded-music');
    
    let selectedFiles = [];
    let selectedMusicStyle = 'electronic';
    let selectedMusicFile = null;

    // Initialize the dashboard
    initializeDashboard();
    
    // Navigation between sections
    navLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            const targetSection = this.getAttribute('data-section');
            
            // Update active nav link
            navLinks.forEach(l => l.classList.remove('active'));
            this.classList.add('active');
            
            // Show corresponding section
            sections.forEach(section => {
                section.classList.remove('active');
                if (section.id === `${targetSection}-section`) {
                    section.classList.add('active');
                }
            });
        });
    });

    // File upload handling
    uploadArea.addEventListener('click', () => {
        fileInput.click();
    });

    fileInput.addEventListener('change', (e) => {
        if (e.target.files.length > 0) {
            // Validate file count
            if (e.target.files.length < 5 || e.target.files.length > 10) {
                uploadError.textContent = 'Please select between 5 and 10 photos.';
                uploadError.style.display = 'block';
                return;
            }
            
            uploadError.style.display = 'none';
            selectedFiles = Array.from(e.target.files);
            displayUploadedFiles();
        }
    });

    function displayUploadedFiles() {
        uploadedFiles.innerHTML = '';
        selectedFiles.forEach((file, index) => {
            const fileElement = document.createElement('div');
            fileElement.className = 'uploaded-file';
            fileElement.innerHTML = `
                <span>${file.name}</span>
                <button class="remove-file" data-index="${index}">&times;</button>
            `;
            uploadedFiles.appendChild(fileElement);
        });

        // Add event listeners to remove buttons
        document.querySelectorAll('.remove-file').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const index = parseInt(e.target.getAttribute('data-index'));
                selectedFiles.splice(index, 1);
                displayUploadedFiles();
            });
        });
    }

    // Music upload handling
    musicUploadArea.addEventListener('click', () => {
        musicFileInput.click();
    });

    musicFileInput.addEventListener('change', (e) => {
        if (e.target.files.length > 0) {
            selectedMusicFile = e.target.files[0];
            uploadedMusic.innerHTML = `
                <div class="uploaded-music-file">
                    <i class="fas fa-music"></i>
                    <span>${selectedMusicFile.name}</span>
                    <button class="remove-music">&times;</button>
                </div>
            `;
            
            // Add event listener to remove button
            document.querySelector('.remove-music').addEventListener('click', (e) => {
                e.stopPropagation();
                selectedMusicFile = null;
                uploadedMusic.innerHTML = '';
                musicFileInput.value = '';
            });
        }
    });

    // Music selection
    musicOptions.forEach(option => {
        option.addEventListener('click', () => {
            musicOptions.forEach(o => o.classList.remove('active'));
            option.classList.add('active');
            selectedMusicStyle = option.getAttribute('data-style');
        });
    });

    // Generate video
    generateBtn.addEventListener('click', generateVideo);

    function generateVideo() {
        // Validate file count
        if (selectedFiles.length < 5 || selectedFiles.length > 10) {
            uploadError.textContent = 'Please select between 5 and 10 photos.';
            uploadError.style.display = 'block';
            return;
        }
        
        uploadError.style.display = 'none';

        // Show loading state
        generateBtn.innerHTML = '<span class="spinner"></span> Generating...';
        generateBtn.disabled = true;

        // Create FormData for file upload
        const formData = new FormData();
        selectedFiles.forEach(file => {
            formData.append('photos', file);
        });
        formData.append('music_style', selectedMusicStyle);
        
        // Add custom music if provided
        if (selectedMusicFile) {
            formData.append('custom_music', selectedMusicFile);
        }

        // Send request to server
        fetch('/generate_video', {
            method: 'POST',
            body: formData
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                // Refresh the page to show the new video
                window.location.reload();
            } else {
                alert('Error generating video: ' + data.message);
            }
        })
        .catch(error => {
            console.error('Error:', error);
            alert('An error occurred while generating the video');
        })
        .finally(() => {
            // Reset button
            generateBtn.innerHTML = 'Generate Video';
            generateBtn.disabled = false;
        });
    }

    // Drag and drop functionality for photos
    uploadArea.addEventListener('dragover', (e) => {
        e.preventDefault();
        uploadArea.classList.add('drag-over');
    });

    uploadArea.addEventListener('dragleave', () => {
        uploadArea.classList.remove('drag-over');
    });

    uploadArea.addEventListener('drop', (e) => {
        e.preventDefault();
        uploadArea.classList.remove('drag-over');
        
        if (e.dataTransfer.files.length > 0) {
            // Validate file count
            if (e.dataTransfer.files.length < 5 || e.dataTransfer.files.length > 10) {
                uploadError.textContent = 'Please select between 5 and 10 photos.';
                uploadError.style.display = 'block';
                return;
            }
            
            uploadError.style.display = 'none';
            selectedFiles = Array.from(e.dataTransfer.files);
            displayUploadedFiles();
        }
    });

    // Initialize dashboard
    function initializeDashboard() {
        // Add event listeners to all play buttons
        document.querySelectorAll('.play-btn, .btn-play').forEach(btn => {
            btn.addEventListener('click', function() {
                const videoUrl = this.getAttribute('data-video-url');
                const videoTitle = this.getAttribute('data-video-title');
                const videoDate = this.getAttribute('data-video-date');
                const videoMusic = this.getAttribute('data-video-music');
                
                openVideoModal(videoUrl, videoTitle, videoDate, videoMusic);
            });
        });
    }

    // Open video modal
    function openVideoModal(videoUrl, videoTitle, videoDate, videoMusic) {
        const modal = document.getElementById('video-player-modal');
        const videoPlayer = document.getElementById('modal-video-player');
        const modalTitle = document.getElementById('video-modal-title');
        const createdDate = document.getElementById('video-created-date');
        const musicStyle = document.getElementById('video-music-style');
        
        // Set video data
        modalTitle.textContent = videoTitle;
        videoPlayer.src = videoUrl;
        createdDate.textContent = videoDate;
        musicStyle.textContent = videoMusic;
        
        // Show modal
        modal.style.display = 'block';
        
        // Load the video
        videoPlayer.load();
        
        // Close modal functionality
        document.querySelectorAll('.modal-close').forEach(btn => {
            btn.addEventListener('click', function() {
                modal.style.display = 'none';
                videoPlayer.pause();
            });
        });
        
        // Close when clicking outside
        window.addEventListener('click', function(e) {
            if (e.target === modal) {
                modal.style.display = 'none';
                videoPlayer.pause();
            }
        });
        
        // Download button
        document.getElementById('download-video-btn').addEventListener('click', function() {
            const downloadLink = document.createElement('a');
            downloadLink.href = videoUrl;
            downloadLink.download = videoTitle + '.mp4';
            document.body.appendChild(downloadLink);
            downloadLink.click();
            document.body.removeChild(downloadLink);
        });
    }
});
</script>

<style>
.dashboard-container {
    min-height: 100vh;
    background: rgba(0, 0, 0, 0.7);
}

.dashboard-header {
    background: rgba(18, 18, 18, 0.9);
    backdrop-filter: blur(10px);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    padding: 15px 0;
    position: sticky;
    top: 0;
    z-index: 100;
}

.dashboard-header nav {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.dashboard-header .nav-links {
    display: flex;
    gap: 30px;
}

.dashboard-header .nav-links a {
    color: var(--light);
    text-decoration: none;
    font-weight: 500;
    padding: 8px 16px;
    border-radius: 5px;
    transition: all 0.3s ease;
}

.dashboard-header .nav-links a.active,
.dashboard-header .nav-links a:hover {
    background: rgba(138, 43, 226, 0.2);
    color: var(--accent);
}

.user-info {
    display: flex;
    align-items: center;
    gap: 15px;
}

.user-info span {
    color: var(--light);
}

.btn-logout {
    background: rgba(255, 56, 96, 0.2);
    color: #ff3860;
    padding: 8px 16px;
    border-radius: 5px;
    text-decoration: none;
    transition: all 0.3s ease;
}

.btn-logout:hover {
    background: rgba(255, 56, 96, 0.3);
}

.dashboard-main {
    padding: 40px 0;
}

.dashboard-section {
    display: none;
}

.dashboard-section.active {
    display: block;
}

.dashboard-title {
    font-size: 2.5rem;
    margin-bottom: 10px;
    background: linear-gradient(90deg, #ff38c9, #8a2be2);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.dashboard-subtitle {
    color: #ccc;
    margin-bottom: 40px;
    font-size: 1.1rem;
}

.creation-interface {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 15px;
    padding: 30px;
    margin-bottom: 40px;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.upload-section {
    margin-bottom: 30px;
}

.upload-area {
    border: 2px dashed var(--primary);
    border-radius: 10px;
    padding: 40px;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s ease;
    margin-bottom: 20px;
}

.upload-area:hover,
.upload-area.drag-over {
    background: rgba(138, 43, 226, 0.1);
}

.upload-area i {
    font-size: 3rem;
    color: var(--primary);
    margin-bottom: 15px;
}

.uploaded-files {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
}

.uploaded-file {
    background: rgba(255, 255, 255, 0.1);
    padding: 8px 15px;
    border-radius: 5px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.remove-file {
    background: none;
    border: none;
    color: #ff3860;
    cursor: pointer;
    font-size: 1.2rem;
}

/* Music upload section */
.music-upload-section {
    margin-bottom: 30px;
}

.music-upload-area {
    border: 2px dashed var(--primary);
    border-radius: 10px;
    padding: 20px;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s ease;
    margin-bottom: 15px;
}

.music-upload-area:hover {
    background: rgba(138, 43, 226, 0.1);
}

.music-upload-area i {
    font-size: 2rem;
    color: var(--primary);
    margin-bottom: 10px;
}

.uploaded-music-file {
    background: rgba(255, 255, 255, 0.1);
    padding: 10px 15px;
    border-radius: 5px;
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 10px;
}

.remove-music {
    background: none;
    border: none;
    color: #ff3860;
    cursor: pointer;
    font-size: 1.2rem;
    margin-left: auto;
}

.music-selection-section {
    margin-bottom: 30px;
}

.music-selection-section h3 {
    margin-bottom: 15px;
    color: var(--light);
}

.music-selection {
    display: flex;
    gap: 15px;
    flex-wrap: wrap;
}

.music-option {
    background: rgba(255, 255, 255, 0.1);
    padding: 10px 20px;
    border-radius: 50px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.music-option:hover,
.music-option.active {
    background: linear-gradient(90deg, var(--primary), var(--secondary));
}

.generate-btn {
    background: linear-gradient(90deg, var(--accent), var(--primary));
    color: white;
    padding: 15px 40px;
    font-size: 1.2rem;
    border-radius: 50px;
    border: none;
    cursor: pointer;
    transition: all 0.3s ease;
    width: 100%;
}

.generate-btn:hover:not(:disabled) {
    transform: scale(1.02);
    box-shadow: 0 10px 20px rgba(255, 56, 201, 0.3);
}

.generate-btn:disabled {
    opacity: 0.7;
    cursor: not-allowed;
}

.recent-videos {
    margin-top: 40px;
}

.recent-videos h2 {
    margin-bottom: 20px;
    color: var(--light);
}

.videos-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 20px;
}

.video-placeholder {
    grid-column: 1 / -1;
    text-align: center;
    padding: 40px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 10px;
    color: #ccc;
}

.video-placeholder i {
    font-size: 3rem;
    margin-bottom: 15px;
    color: var(--primary);
}

/* Video card styles */
.video-card {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 10px;
    overflow: hidden;
    transition: transform 0.3s ease;
}

.video-card:hover {
    transform: translateY(-5px);
}

.video-thumbnail {
    position: relative;
    height: 160px;
    background: rgba(0, 0, 0, 0.3);
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 15px;
}

.thumbnail-placeholder {
    font-size: 3rem;
    color: var(--primary);
}

.play-btn {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(0, 0, 0, 0.7);
    border: none;
    border-radius: 50%;
    width: 50px;
    height: 50px;
    color: white;
    cursor: pointer;
    transition: all 0.3s ease;
}

.play-btn:hover {
    background: var(--accent);
    transform: translate(-50%, -50%) scale(1.1);
}

.video-info {
    padding: 15px;
}

.video-title {
    font-size: 1.1rem;
    margin-bottom: 8px;
    color: var(--light);
}

.video-date, .video-music {
    font-size: 0.9rem;
    color: #ccc;
    margin-bottom: 8px;
}

/* Filter controls */
.filter-controls, .history-controls {
    display: flex;
    gap: 15px;
    margin-bottom: 20px;
    flex-wrap: wrap;
}

.search-input {
    padding: 10px 15px;
    border-radius: 5px;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    color: var(--light);
    min-width: 250px;
}

.sort-select, .filter-select {
    padding: 10px 15px;
    border-radius: 5px;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    color: var(--light);
}

/* All videos grid */
.all-videos-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 20px;
}

/* History table */
.history-table-container {
    overflow-x: auto;
}

.history-table {
    width: 100%;
    border-collapse: collapse;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 10px;
    overflow: hidden;
}

.history-table th, .history-table td {
    padding: 12px 15px;
    text-align: left;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.history-table th {
    background: rgba(138, 43, 226, 0.1);
    font-weight: 600;
}

.history-table tr:hover {
    background: rgba(255, 255, 255, 0.03);
}

.history-thumbnail {
    width: 60px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(0, 0, 0, 0.3);
    border-radius: 5px;
}

.btn-play {
    background: rgba(35, 209, 96, 0.2);
    color: #23d160;
    border: none;
    padding: 6px 12px;
    border-radius: 5px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.btn-play:hover {
    background: rgba(35, 209, 96, 0.3);
}

.no-data {
    text-align: center;
    padding: 30px;
    color: #ccc;
}

.tag {
    background: rgba(138, 43, 226, 0.2);
    color: var(--primary);
    padding: 3px 8px;
    border-radius: 15px;
    font-size: 0.8rem;
    margin-right: 5px;
}

/* Modal styles */
.modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(5px);
}

.modal-content {
    background: rgba(18, 18, 18, 0.95);
    margin: 5% auto;
    padding: 0;
    border-radius: 10px;
    width: 90%;
    max-width: 800px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
}

.modal-header {
    padding: 15px 20px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.modal-header h3 {
    margin: 0;
}

.modal-close {
    font-size: 24px;
    cursor: pointer;
}

.modal-body {
    padding: 20px;
}

.video-player-container {
    margin-bottom: 20px;
}

#modal-video-player {
    width: 100%;
    border-radius: 8px;
}

.video-info {
    background: rgba(255, 255, 255, 0.05);
    padding: 15px;
    border-radius: 8px;
}

.video-info p {
    margin-bottom: 8px;
}

.modal-footer {
    padding: 15px 20px;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    display: flex;
    justify-content: flex-end;
    gap: 10px;
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .dashboard-header nav {
        flex-direction: column;
        gap: 15px;
    }
    
    .dashboard-header .nav-links {
        gap: 15px;
    }
    
    .user-info {
        flex-direction: column;
        gap: 10px;
    }
    
    .dashboard-title {
        font-size: 2rem;
    }
    
    .creation-interface {
        padding: 20px;
    }
    
    .upload-area {
        padding: 20px;
    }
    
    .music-selection {
        justify-content: center;
    }
    
    .filter-controls, .history-controls {
        flex-direction: column;
    }
    
    .search-input {
        min-width: auto;
    }
    
    .history-table {
        font-size: 0.9rem;
    }
    
    .history-table th, .history-table td {
        padding: 8px 10px;
    }
}
</style>
{% endblock %}